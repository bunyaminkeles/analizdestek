{% extends 'base.html' %}
{% load static %}

{% block content %}

<style>
    :root {
        --neon-blue: #00d2ff;
        --neon-purple: #9d50bb;
        --neon-green: #38ef7d;
        --neon-orange: #ff9966;
        --deep-dark: #0f172a;
    }

    body { background-color: #050a14 !important; }

    .neon-card {
        background: rgba(30, 41, 59, 0.5) !important;
        border: 1px solid rgba(255, 255, 255, 0.1) !important;
        backdrop-filter: blur(15px);
        transition: all 0.4s ease;
    }

    /* GERÇEK PARLAMA EFEKTLERİ */
    .glow-purple { box-shadow: 0 0 20px rgba(157, 80, 187, 0.4) !important; border-bottom: 3px solid var(--neon-purple) !important; }
    .glow-green { box-shadow: 0 0 20px rgba(56, 239, 125, 0.4) !important; border-bottom: 3px solid var(--neon-green) !important; }
    .glow-orange { box-shadow: 0 0 20px rgba(255, 153, 102, 0.4) !important; border-bottom: 3px solid var(--neon-orange) !important; }
    .glow-blue { box-shadow: 0 0 20px rgba(0, 210, 255, 0.4) !important; border-bottom: 3px solid var(--neon-blue) !important; }

    .neon-title-main {
        font-size: 5rem;
        font-weight: 900;
        color: #fff;
        text-transform: uppercase;
        text-shadow: 0 0 10px var(--neon-blue), 0 0 20px var(--neon-blue), 0 0 40px var(--neon-blue);
        letter-spacing: 8px;
    }

    .btn-neon-action {
        background: transparent !important;
        border: 2px solid var(--neon-blue) !important;
        color: var(--neon-blue) !important;
        box-shadow: 0 0 15px var(--neon-blue) !important;
        text-transform: uppercase;
        font-weight: bold;
        padding: 12px 40px;
        transition: 0.3s;
    }

    .btn-neon-action:hover {
        background: var(--neon-blue) !important;
        color: #000 !important;
        box-shadow: 0 0 40px var(--neon-blue) !important;
    }

    .section-icon-box {
        width: 70px; height: 70px;
        margin: 0 auto 15px;
        display: flex; align-items: center; justify-content: center;
        border-radius: 50%;
        background: rgba(0, 210, 255, 0.1);
        border: 1px solid var(--neon-blue);
        box-shadow: 0 0 15px var(--neon-blue);
    }
</style>

<div class="container py-5">
    
    <div class="text-center mb-5 pb-4">
        <h1 class="neon-title-main mb-2">ANALIZUS</h1>
        <h5 class="text-info letter-spacing-3 fw-light">BİLİMİN IŞIĞINDA VERİYİ YÖNET</h5>
        <div class="mt-4">
            <a href="{% url 'register' %}" class="btn btn-neon-action rounded-pill">Hemen Başla</a>
        </div>
    </div>

    <div class="row g-4 mb-5">
        <div class="col-md-3">
            <div class="neon-card glow-purple p-4 text-center rounded-4 h-100">
                <small class="text-muted d-block mb-1">TOPLAM KONU</small>
                <h2 class="display-5 fw-bold text-white mb-0">{{ total_topics }}</h2>
                <small class="text-purple" style="color: var(--neon-purple)">Tartışma</small>
            </div>
        </div>
        <div class="col-md-3">
            <div class="neon-card glow-green p-4 text-center rounded-4 h-100">
                <small class="text-muted d-block mb-1">TOPLAM GÖNDERİ</small>
                <h2 class="display-5 fw-bold text-white mb-0">{{ total_posts }}</h2>
                <small class="text-green" style="color: var(--neon-green)">Yanıt</small>
            </div>
        </div>
        <div class="col-md-3">
            <div class="neon-card glow-orange p-4 text-center rounded-4 h-100">
                <small class="text-muted d-block mb-1">TOPLAM ÜYE</small>
                <h2 class="display-5 fw-bold text-white mb-0">{{ total_users }}</h2>
                <small class="text-orange" style="color: var(--neon-orange)">Uzman</small>
            </div>
        </div>
        <div class="col-md-3">
            <div class="neon-card glow-blue p-4 text-center rounded-4 h-100">
                <small class="text-muted d-block mb-1">GÖRÜNTÜLENME</small>
                <h2 class="display-5 fw-bold text-white mb-0">{{ total_views }}</h2>
                <small class="text-info" style="color: var(--neon-blue)">Okuma</small>
            </div>
        </div>
    </div>

    <div class="row g-4 mb-5">
        {% for section in sections %}
        <div class="col-md-4">
            <div class="neon-card p-4 rounded-4 h-100 text-center shadow-sm" style="border: 1px solid rgba(0, 210, 255, 0.2) !important;">
                <div class="section-icon-box">
                    <i class="bi bi-cpu fs-2 text-info"></i>
                </div>
                <h4 class="text-white fw-bold">{{ section.title }}</h4>
                <p class="text-muted small">Bu kategorideki en güncel analizleri ve tartışmaları keşfedin.</p>
                <a href="{% url 'section_detail' section.pk %}" class="btn btn-sm btn-outline-info rounded-pill px-4">Giriş</a>
            </div>
        {% endfor %}
    </div>

    <div class="row g-4 mb-5">
        <div class="col-lg-6">
            <div class="neon-card rounded-4 overflow-hidden h-100">
                <div class="p-3 border-bottom border-secondary bg-dark bg-opacity-50">
                    <h6 class="text-info mb-0 fw-bold"><i class="bi bi-chat-dots me-2"></i> SON TARTIŞMALAR</h6>
                </div>
                <div class="list-group list-group-flush">
                    {% for topic in recent_topics %}
                    <a href="{% url 'topic_detail' topic.pk %}" class="list-group-item list-group-item-action bg-transparent text-white border-secondary border-opacity-10 py-3">
                        <div class="d-flex justify-content-between">
                            <span class="small fw-bold">{{ topic.subject }}</span>
                            <span class="x-small text-muted">{{ topic.views }} göz</span>
                        </div>
                    </a>
                    {% endfor %}
                </div>
            </div>
        </div>
        <div class="col-lg-6">
            <div class="neon-card rounded-4 overflow-hidden h-100">
                <div class="p-3 border-bottom border-secondary bg-dark bg-opacity-50">
                    <h6 class="text-danger mb-0 fw-bold"><i class="bi bi-fire me-2"></i> POPÜLER KONULAR</h6>
                </div>
                <div class="list-group list-group-flush">
                    {% for topic in popular_topics %}
                    <a href="{% url 'topic_detail' topic.pk %}" class="list-group-item list-group-item-action bg-transparent text-white border-secondary border-opacity-10 py-3">
                        <div class="d-flex justify-content-between">
                            <span class="small fw-bold">{{ topic.subject }}</span>
                            <span class="badge bg-secondary rounded-pill x-small">{{ topic.replies_count }}</span>
                        </div>
                    </a>
                    {% endfor %}
                </div>
            </div>
        </div>
    </div>

    <div class="neon-card rounded-4 overflow-hidden mb-5">
        <div class="p-3 border-bottom border-secondary bg-dark bg-opacity-50 text-success">
            <h6 class="mb-0 fw-bold"><i class="bi bi-lightning-charge-fill me-2"></i> SON AKTİVİTELER</h6>
        </div>
        <div class="list-group list-group-flush">
            {% for activity in recent_activities %}
            <div class="list-group-item bg-transparent text-white border-secondary border-opacity-10 py-3 d-flex align-items-center">
                <div class="rounded-circle bg-success me-3" style="width: 10px; height: 10px; box-shadow: 0 0 10px var(--neon-green);"></div>
                <span class="small"><strong class="text-info">{{ activity.created_by.username }}</strong>, "{{ activity.topic.subject|truncatechars:40 }}" konusuna yanıt verdi.</span>
                <span class="ms-auto x-small text-muted">{{ activity.created_at|timesince }} önce</span>
            </div>
            {% endfor %}
        </div>
    </div>

</div>

{% endblock %}